const { Telegraf, Markup } = require('telegraf');
const fs = require('fs');
const path = require('path');


const bot = new Telegraf(BOT_TOKEN);

// Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¿Ð°Ð¿ÐºÑƒ Ð´Ð»Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¹, ÐµÑÐ»Ð¸ ÐµÐµ Ð½ÐµÑ‚
if (!fs.existsSync(IMAGES_FOLDER)) {
    fs.mkdirSync(IMAGES_FOLDER);
}

// Ð”Ð°Ð½Ð½Ñ‹Ðµ Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð² Ñ Ð¸Ð¼ÐµÐ½Ð°Ð¼Ð¸ Ñ„Ð°Ð¹Ð»Ð¾Ð² Ð²Ð¼ÐµÑÑ‚Ð¾ URL
const seatCovers = [
    { id: 1, name: 'Ð§ÐµÑ€Ð½Ð°Ñ Ð°Ð»ÑŒÐºÐ°Ð½Ñ‚Ð°Ñ€Ð° / Ð§ÐµÑ€Ð½Ð°Ñ ÑÐºÐ¾ÐºÐ¾Ð¶Ð°', photo: '1.jpg' },
    { id: 2, name: 'Ð­ÐºÐ¾ÐºÐ¾Ð¶Ð° Ð±ÐµÐ»Ð°Ñ', photo: '2.jpg' },
    { id: 3, name: 'Ð¡Ð¸Ð½ÑÑ Ð°Ð»ÑŒÐºÐ°Ð½Ñ‚Ð°Ñ€Ð° / Ð§ÐµÑ€Ð½Ð°Ñ ÑÐºÐ¾ÐºÐ¾Ð¶Ð°', photo: '3.jpg' },
    { id: 4, name: 'Ð§ÐµÑ€Ð½Ð°Ñ ÑÐºÐ¾ÐºÐ¾Ð¶Ð° / ÐžÑ€Ð°Ð½Ð¶ÐµÐ²Ð°Ñ ÑÐºÐ¾ÐºÐ¾Ð¶Ð°', photo: '4.jpg' },
    { id: 5, name: 'Ð¢ÐµÐ¼Ð½Ð¾-ÑÐµÑ€Ð°Ñ ÑÐºÐ¾ÐºÐ¾Ð¶Ð°', photo: '5.jpg' },
    { id: 6, name: 'Ð§ÐµÑ€Ð½Ð°Ñ ÑÐºÐ¾ÐºÐ¾Ð¶Ð° / Ð¡Ð»Ð¾Ð½Ð¾Ð²Ð°Ñ ÐºÐ¾ÑÑ‚ÑŒ ÑÐºÐ¾ÐºÐ¾Ð¶Ð°', photo: '6.jpg' },
    { id: 7, name: 'Ð§ÐµÑ€Ð½Ð°Ñ ÑÐºÐ¾ÐºÐ¾Ð¶Ð°', photo: '7.jpg' },
    { id: 8, name: 'Ð§ÐµÑ€Ð½Ð°Ñ ÑÐºÐ¾ÐºÐ¾Ð¶Ð° / Ð¡ÐµÑ€Ð°Ñ ÑÐºÐ¾ÐºÐ¾Ð¶Ð°', photo: '8.jpg' },
   
    { id: 9, name: 'ÐŸÐµÑ€ÐµÐ²ÐµÑ€Ð½ÑƒÑ‚Ñ‹Ð¹ Ð±ÑƒÐ³Ð°Ñ‚Ñ‚Ð¸', photo: '9.jpeg' },
    { id: 10, name: 'Ð Ð¾Ð¼Ð± Ð»ÑŽÐºÑ', photo: '10.png' },
    { id: 11, name: 'ÐÐ½Ð°ÐºÐ¾Ð½Ð´Ð° Ð°Ð»ÑŒÐºÐ°Ð½Ñ‚Ð°Ñ€Ð°', photo: '11.jpeg' },
    { id: 12, name: 'Ð­ÐºÑÑ‚Ñ€Ð°', photo: '12.jpeg' },
    { id: 13, name: 'Ð‘Ñ€Ð¾Ð½Ñ', photo: '13.jpg' },
    { id: 14, name: 'Ð–ÑƒÐº', photo: '14.jpeg' },
    { id: 15, name: 'Ð¡ÑƒÐ¿ÐµÑ€ ÑƒÐ·ÐºÐ°Ñ ÐºÐ»Ð°ÑÑÐ¸ÐºÐ°', photo: '15.jpg' },
    { id: 16, name: 'ÐÐ½Ð°ÐºÐ¾Ð½Ð´Ð° ÑÐºÐ¾ÐºÐ¾Ð¶Ð°', photo: '16.jpg' },
    { id: 17, name: 'ÐšÐ»Ð°ÑÑÐ¸ÐºÐ° Ð¿Ð¾Ð´ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»', photo: '17.jpg' },
    { id: 18, name: 'ÐŸÐ°ÑƒÐº Ð°Ð»ÑŒÐºÐ°Ð½Ñ‚Ð°Ñ€Ð°', photo: '18.jpg' },
    { id: 19, name: 'Ð“Ð°Ð»Ð¾Ñ‡ÐºÐ¸', photo: '19.jpg' },
    { id: 20, name: 'ÐÐ»Ð»Ð¸Ð³Ð°Ñ‚Ð¾Ñ€', photo: '20.jpg' },
    { id: 21, name: 'ÐšÐ°Ñ€ÐºÐ°ÑÐ½Ñ‹Ðµ ÐŸÐ¾Ð´ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»', photo: '21.png' },
    { id: 22, name: 'ÐšÐ°Ñ€ÐºÐ°ÑÐ½Ñ‹Ðµ ÑÐ¾Ñ‚Ñ‹', photo: '22.png' },
    { id: 23, name: 'ÐšÐ°Ñ€ÐºÐ°ÑÐ½Ñ‹Ðµ ÑÑƒÐ¿ÐµÑ€ ÑƒÐ·ÐºÐ°Ñ ÐºÐ»Ð°ÑÑÐ¸ÐºÐ°', photo: '23.png' },
    { id: 24, name: 'ÐšÐ°Ñ€ÐºÐ°ÑÐ½Ñ‹Ðµ Ñ€Ð¾Ð¼Ð±Ñ‹', photo: '24.jpg' },
];

const carMats = [
    { id: 1, name: 'Ð­ÐºÐ¾ÐºÐ¾Ð¶Ð° + Ð²Ð¾Ñ€Ñ Ð¿Ñ€ÐµÐ¼Ð¸ÑƒÐ¼', photo: '25.jpg' },
    { id: 2, name: 'Ð­ÐºÐ¾ÐºÐ¾Ð¶Ð° + Ð•Ð²Ð°', photo: '26.jpg' },
    { id: 3, name: 'ÐšÐ¾Ð²Ñ€Ð¸ÐºÐ¸ Ð² Ð±Ð°Ð³Ð°Ð¶Ð½Ð¸Ðº', photo: '27.jpg' },
    { id: 4, name: 'Ð¦Ð²ÐµÑ‚Ð° Ð½Ð° Ð²Ñ‹Ð±Ð¾Ñ€\n13000 ÐºÐ¾Ð¼Ð¿Ð»ÐµÐºÑ‚ Ñ‡Ñ‚Ð¾ Ð² ÑÐ°Ð»Ð¾Ð½ Ñ‡Ñ‚Ð¾ Ð² Ð±Ð°Ð³Ð°Ð¶Ð½Ð¸Ðº ', photo: '28.jpg' }
];

// Ð¤Ð°Ð¹Ð»Ñ‹ Ð´Ð»Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ñ… Ñ€Ð°Ð·Ð´ÐµÐ»Ð¾Ð²
const infoPhotos = {
    about: 'about_us.jpg',
    install: 'installation.jpg',
    payment: 'payment_delivery.jpg'
};

// Ð¡Ð¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ Ð´Ð»Ñ ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸Ð¸ Ð¸ Ð·Ð°ÐºÐ°Ð·Ð¾Ð²
const userStates = {};

// Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ
const mainMenu = Markup.keyboard([
    ['ðŸš— ÐÐ²Ñ‚Ð¾Ñ‡ÐµÑ…Ð»Ñ‹', 'ðŸ›’ ÐÐ²Ñ‚Ð¾ÐºÐ¾Ð²Ñ€Ñ‹'],
    ['â„¹ï¸ Ðž Ð½Ð°Ñ', 'ðŸ”§ Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°'],
    ['ðŸ’° ÐžÐ¿Ð»Ð°Ñ‚Ð° Ð¸ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ°', 'ðŸ“ž Ð‘ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð°Ñ ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸Ñ']
]).resize();

// ÐšÐ½Ð¾Ð¿ÐºÐ° "ÐÐ°Ð·Ð°Ð´"
const backButton = Markup.keyboard(['â¬…ï¸ ÐÐ°Ð·Ð°Ð´']).resize();

// ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ ÑÑ‚Ð°Ñ€Ñ‚
bot.start((ctx) => {
    ctx.reply('Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² AutoAÑ‚ÐµÐ»ÑŒe! Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ€Ð°Ð·Ð´ÐµÐ»:', mainMenu);
});

// ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð³Ð»Ð°Ð²Ð½Ð¾Ð³Ð¾ Ð¼ÐµÐ½ÑŽ
bot.hears('ðŸš— ÐÐ²Ñ‚Ð¾Ñ‡ÐµÑ…Ð»Ñ‹', (ctx) => {
    userStates[ctx.from.id] = { currentCategory: 'seatCovers' };
    showProducts(ctx, seatCovers, 'ÐÐ²Ñ‚Ð¾Ñ‡ÐµÑ…Ð»Ñ‹');
});
bot.hears('ðŸ›’ ÐÐ²Ñ‚Ð¾ÐºÐ¾Ð²Ñ€Ñ‹', (ctx) => {
    userStates[ctx.from.id] = { currentCategory: 'carMats' };
    showProducts(ctx, carMats, 'ÐÐ²Ñ‚Ð¾ÐºÐ¾Ð²Ñ€Ñ‹');
});
bot.hears('â„¹ï¸ Ðž Ð½Ð°Ñ', (ctx) => showInfo(ctx, 'about'));
bot.hears('ðŸ”§ Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°', (ctx) => showInstallationInfo(ctx));
bot.hears('ðŸ’° ÐžÐ¿Ð»Ð°Ñ‚Ð° Ð¸ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ°', (ctx) => showPaymentInfo(ctx));
bot.hears('ðŸ“ž Ð‘ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð°Ñ ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸Ñ', (ctx) => startConsultation(ctx));

// Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¿Ð¾ÐºÐ°Ð·Ð° Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð² Ñ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¼Ð¸ Ñ„Ð¾Ñ‚Ð¾
async function showProducts(ctx, products, category) {
    for (const product of products) {
        const photoPath = path.join(IMAGES_FOLDER, product.photo);
        
        if (fs.existsSync(photoPath)) {
            try {
                await ctx.replyWithPhoto({ source: photoPath }, {
                    caption: `${product.name}.`,
                    reply_markup: Markup.inlineKeyboard([
                        Markup.button.callback('ðŸ›’ ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ', `order_${product.id}`)
                    ]).reply_markup
                });
            } catch (e) {
                console.error('Error sending photo:', e);
                await ctx.reply(`${product.name}\n\n[ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐµ Ñ„Ð¾Ñ‚Ð¾]`, 
                    Markup.inlineKeyboard([
                        Markup.button.callback('ðŸ›’ ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ', `order_${product.id}`)
                    ]));
            }
        } else {
            await ctx.reply(`${product.name}\n\n[Ð¤Ð¾Ñ‚Ð¾ Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÐµÑ‚]`, 
                Markup.inlineKeyboard([
                    Markup.button.callback('ðŸ›’ ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ', `order_${product.id}`)
                ]));
        }
        
        await new Promise(resolve => setTimeout(resolve, 300));
    }
    ctx.reply('Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ:', backButton);
}

// Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¿Ð¾ÐºÐ°Ð·Ð° Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸ Ð¾Ð± ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐµ (Ñ‚ÐµÐºÑÑ‚ + Ñ„Ð¾Ñ‚Ð¾)
async function showInstallationInfo(ctx) {
    const text = 'Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð°Ð²Ñ‚Ð¾Ñ‡ÐµÑ…Ð»Ð¾Ð² Ð¸Ð· ÑÐºÐ¾ÐºÐ¾Ð¶Ð¸ â€“ ÑÑ‚Ð¾ Ð½Ðµ ÑÐ»Ð¾Ð¶Ð½Ð¾Ðµ Ð² Ð¸ÑÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ð¸ Ð·Ð´Ð°Ð½Ð¸Ðµ. ÐœÑ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ð½Ñ‹, Ñ‡Ñ‚Ð¾ Ð’Ð°Ð¼ ÑƒÐ´Ð°ÑÑ‚ÑÑ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ðµ Ñ‡ÐµÑ…Ð»Ñ‹ Ð½Ð° ÑˆÑ‚Ð°Ñ‚Ð½Ñ‹Ðµ ÑÐ¸Ð´ÐµÐ½Ð¸Ñ ÑÐ°Ð»Ð¾Ð½Ð°, Ð´Ð»Ñ Ñ‚Ð¾Ð³Ð¾, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ñ‰ÑƒÑ‚Ð¸Ñ‚ÑŒ Ð²ÑÐµ Ð¿Ñ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð° Ð½Ð°ÑˆÐµÐ¹ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ†Ð¸Ð¸ Ð² Ð¿Ð¾Ð»Ð½Ð¾Ð¹ Ð¼ÐµÑ€Ðµ. Ð”Ð»Ñ Ð¿Ñ€Ð¾Ð¸Ð·Ð²ÐµÐ´ÐµÐ½Ð¸Ñ ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð¸Ñ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð²Ð¾ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒÑÑ Ð»Ð¸Ð¿ÑƒÑ‡ÐºÐ¾Ð¹, ÐºÑ€ÑŽÑ‡ÐºÐ¾Ð¼ Ð¸Ð»Ð¸ ÑˆÐ½ÑƒÑ€ÐºÐ¾Ð¼, Ð² Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¾Ñ‚ ÐºÐ¾Ð½ÑÑ‚Ñ€ÑƒÐºÑ‚Ð¸Ð²Ð½Ñ‹Ñ… Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚ÐµÐ¹ Ñ‡ÐµÑ…Ð»Ð¾Ð². Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÐ¼ Ð½Ð°Ñ‡Ð¸Ð½Ð°Ñ‚ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ Ð¿Ð¾ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐµ Ñ Ð¿ÐµÑ€ÐµÐ´Ð½ÐµÐ³Ð¾ ÑÐ¸Ð´ÐµÐ½Ð¸Ñ Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»Ñ. ÐŸÑ€Ð¸ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ð¸ Ð¿ÐµÑ€ÐµÐ´Ð½ÐµÐ¹ Ð¿Ð¾Ð´ÑƒÑˆÐºÐ¸ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸, ÑÐ»ÐµÐ´ÑƒÐµÑ‚ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾ Ñ€Ð°ÑÐ¿Ð¾Ð»Ð¾Ð¶Ð¸Ñ‚ÑŒ ÑˆÐ¾Ð² Ð½Ð° Ð¸Ð·Ð´ÐµÐ»Ð¸Ð¸ Ð² Ð¿Ñ€ÐµÐ´ÑƒÑÐ¼Ð¾Ñ‚Ñ€ÐµÐ½Ð½Ð¾Ð¼ Ð´Ð»Ñ Ð½ÐµÐ³Ð¾ Ð¼ÐµÑÑ‚Ðµ. Ð­Ñ‚Ð¾ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð´Ð»Ñ Ð±ÐµÑÐ¿Ñ€ÐµÐ¿ÑÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð²Ñ‹Ñ…Ð¾Ð´Ð° Ð¿Ð¾Ð´ÑƒÑˆÐºÐ¸ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸ Ñ‡ÐµÑ€ÐµÐ· Ð¾Ñ‚Ð²ÐµÑ€ÑÑ‚Ð¸Ðµ Ð² ÑÐ»ÑƒÑ‡Ð°Ðµ Ð°Ð²Ð°Ñ€Ð¸Ð¹Ð½Ð¾Ð¹ ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸Ð¸. Ð­ÐºÐ¾ÐºÐ¾Ð¶Ð° â€“ ÑÑ‚Ð¾ ÐºÑ€Ð°ÑÐ¸Ð²Ñ‹Ð¹, Ð¿Ð»Ð°ÑÑ‚Ð¸Ñ‡Ð½Ñ‹Ð¹, Ð¿Ð¾Ð´Ð°Ñ‚Ð»Ð¸Ð²Ñ‹Ð¹ Ð¸ ÑƒÐ´Ð¾Ð±Ð½Ñ‹Ð¹ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð», Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ Ð½Ð¸ÐºÐ°ÐºÐ¸Ñ… Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼ Ð¿Ñ€Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐµ Ð±Ñ‹Ñ‚ÑŒ Ð½Ðµ Ð´Ð¾Ð»Ð¶Ð½Ð¾. ÐžÐ´Ð½Ð°ÐºÐ¾ ÑÑ‚Ð¾Ð¸Ñ‚ Ð²ÑÐµ Ð¶Ðµ Ð±Ñ‹Ñ‚ÑŒ Ð±Ð¾Ð»ÐµÐµ Ð¾ÑÑ‚Ð¾Ñ€Ð¾Ð¶Ð½Ñ‹Ð¼Ð¸ Ñ Ð¾ÑÑ‚Ñ€Ñ‹Ð¼Ð¸, ÐºÐ¾Ð»ÑŽÑ‰Ð¸Ð¼Ð¸ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚Ð°Ð¼Ð¸ Ð¸ ÐºÑ€ÑŽÑ‡ÐºÐ°Ð¼Ð¸, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ð¾ Ð½Ðµ Ð¿Ð¾Ð²Ñ€ÐµÐ´Ð¸Ñ‚ÑŒ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð». ÐÐ°Ð³Ð»ÑÐ´Ð½Ð¾ Ð¸Ð·ÑƒÑ‡Ð¸Ñ‚ÑŒ ÐºÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚Ñ‹ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ Ð¼Ð¾Ð¶Ð½Ð¾ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸. ÐœÑ‹ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð·Ð¸Ð»Ð¸ Ð²ÐµÑÑŒ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð²Ñ‹ Ð¼Ð¾Ð³Ð»Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÐµÐ³Ð¾ ÑÐ²Ð¾Ð¸Ð¼Ð¸ ÑÐ¸Ð»Ð°Ð¼Ð¸. ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ñ… Ñ‡ÐµÑ…Ð»Ð¾Ð² â€“ ÑÑ‚Ð¾ Ð·Ð°Ð»Ð¾Ð³ Ð¸Ñ… Ð´Ð»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð¹ ÑÐ»ÑƒÐ¶Ð±Ñ‹.';
    
    const photoPath = path.join(IMAGES_FOLDER, infoPhotos.install);
    
    if (fs.existsSync(photoPath)) {
        try {
            await ctx.replyWithPhoto({ source: photoPath }, { caption: text });
        } catch (e) {
            console.error('Error sending photo:', e);
            await ctx.reply(text);
        }
    } else {
        await ctx.reply(text);
    }
    
    ctx.reply('Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ:', backButton);
}

// Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¿Ð¾ÐºÐ°Ð·Ð° Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸ Ð¾Ð± Ð¾Ð¿Ð»Ð°Ñ‚Ðµ Ð¸ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐµ (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‚ÐµÐºÑÑ‚)
async function showPaymentInfo(ctx) {
    const textParts = [
        `ÐÐ°Ñˆ Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚-Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½ Ð¿Ð¾Ð·Ð°Ð±Ð¾Ñ‚Ð¸Ð»ÑÑ Ð¾ ÐºÐ¾Ð¼Ñ„Ð¾Ñ€Ñ‚Ðµ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°. Ð˜Ð¼ÐµÐ½Ð½Ð¾ Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ Ð¿Ñ€Ð¸Ð¾Ð±Ñ€ÐµÑ‚ÐµÐ½Ð½ÑƒÑŽ Ð½Ð° Ð½Ð°ÑˆÐµÐ¼ ÑÐ°Ð¹Ñ‚Ðµ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ†Ð¸ÑŽ Ð¼Ñ‹ Ð´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÐ¼ Ð² Ð»ÑŽÐ±Ð¾Ð¹ Ñ€ÐµÐ³Ð¸Ð¾Ð½ Ð Ð¾ÑÑÐ¸Ð¸ Ð¸ Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÐ¼ Ð²Ð°Ð¼ ÑˆÐ¸Ñ€Ð¾ÐºÐ¸Ð¹ Ð²Ñ‹Ð±Ð¾Ñ€ ÑÐ¿Ð¾ÑÐ¾Ð±Ð¾Ð² Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ Ð¸ Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹.

ÐšÐ°Ðº Ð¾Ñ„Ð¾Ñ€Ð¼Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð·?
Ð¾Ñ„Ð¾Ñ€Ð¼Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð· Ð½Ð° ÑÐ°Ð¹Ñ‚Ðµ, Ð´Ð¾Ð±Ð°Ð²Ð¸Ð² Ð¿Ð¾Ð½Ñ€Ð°Ð²Ð¸Ð²ÑˆÐ¸ÐµÑÑ Ð²Ð°Ð¼ Ñ‚Ð¾Ð²Ð°Ñ€Ñ‹ Ð² ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñƒ. Ð—Ð°ÐºÐ°Ð· Ð¼Ð¾Ð¶Ð½Ð¾ ÑÑ„Ð¾Ñ€Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Ð»ÑŽÐ±Ð¾Ðµ ÑƒÐ´Ð¾Ð±Ð½Ð¾Ðµ Ð´Ð»Ñ Ð²Ð°Ñ Ð²Ñ€ÐµÐ¼Ñ ÑÑƒÑ‚Ð¾Ðº. Ð’ Ð±Ð»Ð¸Ð¶Ð°Ð¹ÑˆÐµÐµ Ð²Ñ€ÐµÐ¼Ñ Ð¿Ð¾ÑÐ»Ðµ Ñ€Ð°Ð·Ð¼ÐµÑ‰ÐµÐ½Ð¸Ñ Ð·Ð°ÐºÐ°Ð·Ð° Ð½Ð° ÑÐ°Ð¹Ñ‚Ðµ Vchehol.ru Ð½Ð°ÑˆÐ¸ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ñ‹ ÑÐ²ÑÐ¶ÑƒÑ‚ÑÑ Ñ Ð²Ð°Ð¼Ð¸ Ð´Ð»Ñ ÐµÐ³Ð¾ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ñ Ð¸ ÑƒÑ‚Ð¾Ñ‡Ð½ÐµÐ½Ð¸Ñ Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹;
Ð¾Ñ„Ð¾Ñ€Ð¼Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð· Ð¿Ð¾ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ñƒ 8 (958) 510-67-67.`,

        `Ð¡Ð¿Ð¾ÑÐ¾Ð±Ñ‹ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸
ÐÐ°Ñˆ Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚-Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½ Ð¿Ð¾Ð·Ð°Ð±Ð¾Ñ‚Ð¸Ð»ÑÑ Ð¾ ÐºÐ¾Ð¼Ñ„Ð¾Ñ€Ñ‚Ðµ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°. Ð˜Ð¼ÐµÐ½Ð½Ð¾ Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ Ð¿Ñ€Ð¸Ð¾Ð±Ñ€ÐµÑ‚ÐµÐ½Ð½ÑƒÑŽ Ð½Ð° Ð½Ð°ÑˆÐµÐ¼ ÑÐ°Ð¹Ñ‚Ðµ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ†Ð¸ÑŽ Ð¼Ñ‹ Ð´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÐ¼ Ð² Ð»ÑŽÐ±Ð¾Ð¹ Ñ€ÐµÐ³Ð¸Ð¾Ð½ Ð Ð¾ÑÑÐ¸Ð¸. Ð¡ÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð° Ð·Ð°ÐºÐ°Ð·Ð°Ð½Ð½Ñ‹Ñ… Ð²Ð°Ð¼Ð¸ Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð², Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ñ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹Ñ… Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð² Ð´Ð»Ñ Ð¿Ð¾ÑˆÐ¸Ð²Ð° Ð½Ð° ÑÐºÐ»Ð°Ð´Ðµ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸Ð¸, Ð° Ñ‚Ð°ÐºÐ¶Ðµ Ð¾Ñ‚ Ð°Ð´Ñ€ÐµÑÐ° Ð¿Ð¾Ð»ÑƒÑ‡Ð°Ñ‚ÐµÐ»Ñ.

ÐšÑƒÑ€ÑŒÐµÑ€Ð¾Ð¼ Ð² Ð¿Ñ€ÐµÐ´ÐµÐ»Ð°Ñ… Ð’Ð»Ð°Ð´Ð¸Ð¼Ð¸Ñ€ÑÐºÐ¾Ð¹ Ð¾Ð±Ð»Ð°ÑÑ‚Ð¸. Ð¡Ñ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ ÑƒÑÐ»ÑƒÐ³Ð¸ â€“ 400 Ñ€ÑƒÐ±Ð»ÐµÐ¹. ÐžÐ¿Ð»Ð°Ñ‚Ð° Ð¾ÑÑƒÑ‰ÐµÑÑ‚Ð²Ð»ÑÐµÑ‚ÑÑ Ð·Ð°Ñ€Ð°Ð½ÐµÐµ, Ð»Ð¸Ð±Ð¾ Ð½Ð°Ð»Ð¸Ñ‡Ð½Ñ‹Ð¼Ð¸ Ð¿Ð¾ Ñ„Ð°ÐºÑ‚Ñƒ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð·Ð°ÐºÐ°Ð·Ð°.
Ð¡Ð°Ð¼Ð¾Ð²Ñ‹Ð²Ð¾Ð·Ð¾Ð¼ ÑÐ¾ ÑÐºÐ»Ð°Ð´Ð° Ð² Ð³Ð¾Ñ€Ð¾Ð´Ðµ Ð’Ð»Ð°Ð´Ð¸Ð¼Ð¸Ñ€ Ð¸ ÐœÐ¾ÑÐºÐ²Ð°. Ð£ÑÐ»ÑƒÐ³Ð° Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ÑÑ Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾.
Ð¢Ñ€Ð°Ð½ÑÐ¿Ð¾Ñ€Ñ‚Ð½Ñ‹Ð¼Ð¸ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸ÐµÐ¹ Â«ÐŸÐ­ÐšÂ», Â«Ð”ÐµÐ»Ð¾Ð²Ñ‹Ðµ Ð»Ð¸Ð½Ð¸Ð¸Â». Ð¡Ñ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ ÑƒÑÐ»ÑƒÐ³Ð¸ Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ ÑƒÐ´Ð°Ð»ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡Ð°Ñ‚ÐµÐ»Ñ Ð¾Ñ‚ Ð³Ð¾Ñ€Ð¾Ð´Ð° Ð’Ð»Ð°Ð´Ð¸Ð¼Ð¸Ñ€.
Â«ÐŸÐ¾Ñ‡Ñ‚Ð¾Ð¹ Ð Ð¾ÑÑÐ¸Ð¸Â». Ð¡Ñ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ ÑƒÑÐ»ÑƒÐ³Ð¸ Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ ÑƒÐ´Ð°Ð»ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡Ð°Ñ‚ÐµÐ»Ñ Ð¾Ñ‚ Ð³Ð¾Ñ€Ð¾Ð´Ð° Ð’Ð»Ð°Ð´Ð¸Ð¼Ð¸Ñ€.`,

        `Ð¡Ð¿Ð¾ÑÐ¾Ð±Ñ‹ Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹
ÐšÐ»Ð¸ÐµÐ½Ñ‚Ñ‹ Ð½Ð°ÑˆÐµÐ³Ð¾ Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚-Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½Ð° Ð¼Ð¾Ð³ÑƒÑ‚ Ð²Ð¾ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒÑÑ Ð»ÑŽÐ±Ñ‹Ð¼ ÑƒÐ´Ð¾Ð±Ð½Ñ‹Ð¼ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð¾Ð¼ Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹ Ñ‚Ð¾Ð²Ð°Ñ€Ð°.

ÐžÐ¿Ð»Ð°Ñ‚Ð° Ð½Ð°Ð»Ð¸Ñ‡Ð½Ñ‹Ð¼Ð¸ Ð¿Ñ€Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ð¸ Ð·Ð°ÐºÐ°Ð·Ð°. ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð¾ Ð´Ð°Ð½Ð½Ð¾Ð³Ð¾ ÑÐ¿Ð¾ÑÐ¾Ð±Ð° Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹ â€“ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð»Ð¸Ñ‡Ð½Ð¾ Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ðµ Ð¸ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð·Ð°ÐºÐ°Ð·Ð°Ð½Ð½Ñ‹Ñ… Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð².
Ð‘ÐµÐ·Ð½Ð°Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ Ñ€Ð°ÑÑ‡ÐµÑ‚ Ð´Ð»Ñ ÑŽÑ€Ð¸Ð´Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð»Ð¸Ñ†. ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð¾ Ð´Ð°Ð½Ð½Ð¾Ð³Ð¾ ÑÐ¿Ð¾ÑÐ¾Ð±Ð° Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹ â€“ Ð³Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ñ‚Ð¾Ð²Ð°Ñ€Ð° Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ÑÑ Ð±Ð°Ð½ÐºÐ¾Ð¼, Ñ‡ÐµÑ€ÐµÐ· ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ð»ÑÑ Ñ€Ð°ÑÑ‡ÐµÑ‚. ÐŸÐ¾ÑÐ»Ðµ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ Ñ‚Ð¾Ð²Ð°Ñ€Ð° Ð²Ñ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚Ðµ Ð²ÑÐµ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹Ðµ Ð±ÑƒÑ…Ð³Ð°Ð»Ñ‚ÐµÑ€ÑÐºÐ¸Ðµ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ñ‹ Ð´Ð»Ñ Ð¾Ñ‚Ñ‡ÐµÑ‚Ð½Ð¾ÑÑ‚Ð¸.`,

        `ÐŸÐµÑ€ÐµÐ²Ð¾Ð´ Ð½Ð° ÐºÐ°Ñ€Ñ‚Ñƒ Ð¡Ð±ÐµÑ€Ð±Ð°Ð½ÐºÐ°*. ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð¾ Ð´Ð°Ð½Ð½Ð¾Ð³Ð¾ ÑÐ¿Ð¾ÑÐ¾Ð±Ð° Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹ â€“ Ð²Ð»Ð°Ð´ÐµÐ»ÑŒÑ†Ñ‹ ÐºÐ°Ñ€Ñ‚Ñ‹ Ð¡Ð±ÐµÑ€Ð±Ð°Ð½ÐºÐ° Ð¼Ð¾Ð³ÑƒÑ‚ Ð¾Ð¿Ð»Ð°Ñ‚Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð· Ð±ÐµÐ· Ð½Ð°Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ð¾Ð¹ ÐºÐ¾Ð¼Ð¸ÑÑÐ¸Ð¸ (Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ Ñ€ÐµÐºÐ²Ð¸Ð·Ð¸Ñ‚Ñ‹ Ð´Ð»Ñ Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹).
ÐžÐ¿Ð»Ð°Ñ‚Ð° Ð½Ð°Ð»Ð¾Ð¶ÐµÐ½Ð½Ñ‹Ð¼ Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð¾Ð¼ Ð¿Ñ€Ð¸ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐµ Â«ÐŸÐ¾Ñ‡Ñ‚Ð¾Ð¹ Ð Ð¾ÑÑÐ¸Ð¸Â» Ð¸Ð»Ð¸ Ñ‚Ñ€Ð°Ð½ÑÐ¿Ð¾Ñ€Ñ‚Ð½Ñ‹Ð¼Ð¸ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸ÑÐ¼Ð¸. ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð¾ Ð´Ð°Ð½Ð½Ð¾Ð³Ð¾ ÑÐ¿Ð¾ÑÐ¾Ð±Ð° Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹ â€“ Ð¿Ð¾Ð»ÑƒÑ‡Ð°Ñ‚ÐµÐ»ÑŒ Ð½Ðµ Ð´ÐµÐ»Ð°ÐµÑ‚ Ð¿Ñ€ÐµÐ´Ð¾Ð¿Ð»Ð°Ñ‚Ñƒ, Ð° Ð¾Ð¿Ð»Ð°Ñ‡Ð¸Ð²Ð°ÐµÑ‚ Ñ‚Ð¾Ð²Ð°Ñ€ Ð»Ð¸ÑˆÑŒ Ð¿Ð¾ Ñ„Ð°ÐºÑ‚Ñƒ ÐµÐ³Ð¾ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ.
ÐžÐ¿Ð»Ð°Ñ‚Ð° Ð¿Ñ€Ð¸ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð¸ Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð½Ð¾Ð¹ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹ Â«Ð¯Ð½Ð´ÐµÐºÑ Ð”ÐµÐ½ÑŒÐ³Ð¸Â» Ð±ÐµÐ· ÐºÐ¾Ð¼Ð¸ÑÑÐ¸Ð¸. ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð¾ Ð´Ð°Ð½Ð½Ð¾Ð³Ð¾ ÑÐ¿Ð¾ÑÐ¾Ð±Ð° Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹ â€“ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð¾Ð¿Ð»Ð°Ñ‚Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð· Ð¿Ñ€ÑÐ¼Ð¾ Ð½Ð° ÑÐ°Ð¹Ñ‚Ðµ Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚-Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½Ð° ÑÑ€Ð°Ð·Ñƒ Ð¿Ð¾ÑÐ»Ðµ ÐµÐ³Ð¾ Ð¾Ñ„Ð¾Ñ€Ð¼Ð»ÐµÐ½Ð¸Ñ.`,

        `ÐšÐ°Ðº ÑÑ‚Ð¾ Ð¿Ñ€Ð¾Ð¸ÑÑ…Ð¾Ð´Ð¸Ñ‚: Ð’Ñ‹ Ð¾Ñ„Ð¾Ñ€Ð¼Ð»ÑÐµÑ‚Ðµ Ð·Ð°ÐºÐ°Ð· ÑƒÐ´Ð¾Ð±Ð½Ñ‹Ð¼ Ð´Ð»Ñ Ð²Ð°Ñ ÑÐ¿Ð¾ÑÐ¾Ð±Ð¾Ð¼. Ð•ÑÐ»Ð¸ Ð·Ð°ÐºÐ°Ð· Ð±Ñ‹Ð» Ð¾Ñ„Ð¾Ñ€Ð¼Ð»ÐµÐ½ Ð½Ðµ Ð¿Ð¾ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ñƒ, Ñ‚Ð¾ Ð² Ñ‚ÐµÑ‡ÐµÐ½Ð¸Ð¸ ÑÑƒÑ‚Ð¾Ðº Ð²Ð°Ð¼ Ð¿Ð¾Ð·Ð²Ð¾Ð½Ð¸Ñ‚ Ð½Ð°Ñˆ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€ Ð´Ð»Ñ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ñ Ð·Ð°ÐºÐ°Ð·Ð° Ð¸ ÑƒÑ‚Ð¾Ñ‡Ð½ÐµÐ½Ð¸Ñ Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸. ÐŸÐ¾ÑÐ»Ðµ ÑÑ‚Ð¾Ð³Ð¾ Ð½Ð° ÑƒÐºÐ°Ð·Ð°Ð½Ð½Ñ‹Ð¹ Ð²Ð°Ð¼Ð¸ Ð°Ð´Ñ€ÐµÑ ÑÐ»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð½Ð¾Ð¹ Ð¿Ð¾Ñ‡Ñ‚Ñ‹ Ð¿Ð¾ÑÑ‚ÑƒÐ¿Ð¸Ñ‚ Ð¿Ð¸ÑÑŒÐ¼Ð¾ Ñ ÑÑÑ‹Ð»ÐºÐ¾Ð¹ Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñƒ Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹ Ð²Ð°ÑˆÐµÐ³Ð¾ Ð·Ð°ÐºÐ°Ð·Ð°. Ð’ÑÐµ Ð²Ð²ÐµÐ´ÐµÐ½Ð½Ñ‹Ðµ Ð²Ð°Ð¼Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ñ…Ð¾Ð´ÑÑ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‡ÐµÑ€ÐµÐ· ÑÐµÑ€Ð²Ð¸Ñ Â«Ð¯Ð½Ð´ÐµÐºÑ Ð”ÐµÐ½ÑŒÐ³Ð¸Â» Ð¸ Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð·Ð°Ñ‰Ð¸Ñ‰ÐµÐ½Ñ‹. ÐœÑ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ„Ð°ÐºÑ‚Ðµ ÑÐ¾Ð²ÐµÑ€ÑˆÐµÐ½Ð½Ð¾Ð³Ð¾ Ð²Ð°Ð¼Ð¸ Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð°.`,

        `*Ð´Ð»Ñ Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹ (Ð²Ð²Ð¾Ð´Ð° Ñ€ÐµÐºÐ²Ð¸Ð·Ð¸Ñ‚Ð¾Ð² Ð²Ð°ÑˆÐµÐ¹ ÐºÐ°Ñ€Ñ‚Ñ‹) Ð²Ñ‹ Ð±ÑƒÐ´ÐµÑ‚Ðµ Ð¿ÐµÑ€ÐµÐ½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ñ‹ Ð½Ð° Ð¿Ð»Ð°Ñ‚Ñ‘Ð¶Ð½Ñ‹Ð¹ ÑˆÐ»ÑŽÐ· ÐŸÐÐž Ð¡Ð‘Ð•Ð Ð‘ÐÐÐš. Ð¡Ð¾ÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ðµ Ñ Ð¿Ð»Ð°Ñ‚Ñ‘Ð¶Ð½Ñ‹Ð¼ ÑˆÐ»ÑŽÐ·Ð¾Ð¼ Ð¸ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‡Ð° Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸ Ð¾ÑÑƒÑ‰ÐµÑÑ‚Ð²Ð»ÑÐµÑ‚ÑÑ Ð² Ð·Ð°Ñ‰Ð¸Ñ‰Ñ‘Ð½Ð½Ð¾Ð¼ Ñ€ÐµÐ¶Ð¸Ð¼Ðµ Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ð° ÑˆÐ¸Ñ„Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ SSL. Ð’ ÑÐ»ÑƒÑ‡Ð°Ðµ ÐµÑÐ»Ð¸ Ð²Ð°Ñˆ Ð±Ð°Ð½Ðº Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸ÑŽ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾Ð³Ð¾ Ð¿Ñ€Ð¾Ð²ÐµÐ´ÐµÐ½Ð¸Ñ Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚-Ð¿Ð»Ð°Ñ‚ÐµÐ¶ÐµÐ¹ Verified By Visa Ð¸Ð»Ð¸ MasterCard SecureCode, Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÐ´ÐµÐ½Ð¸Ñ Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð° Ñ‚Ð°ÐºÐ¶Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ñ‚ÑŒÑÑ Ð²Ð²Ð¾Ð´ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¿Ð°Ñ€Ð¾Ð»Ñ.`,

        `Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‚ Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð² Ð¸ Ð³Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ
Ð“Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ 1 Ð³Ð¾Ð´ Ð½Ð° Ð²ÑÑŽ Ð¿Ñ€Ð¾Ð´ÑƒÐºÐ¸Ñ†Ð¸ÑŽ Ð¸ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸ Ð¿Ñ€Ð¸Ð¾Ð±Ñ€ÐµÑÑ‚Ð¸ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½ÑƒÑŽ Ð³Ð°Ñ€Ð°Ð½Ñ‚Ð¸ÑŽ Ð½Ð° 2 Ð³Ð¾Ð´Ð°!

ÐœÑ‹ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ð¼ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚ Ð¸ Ð¾Ð±Ð¼ÐµÐ½ Ñ‚Ð¾Ð²Ð°Ñ€Ð° Ñ Ð¿Ð¾Ð»Ð½Ñ‹Ð¼ ÑÐ¾Ð±Ð»ÑŽÐ´ÐµÐ½Ð¸ÐµÐ¼ Ð·Ð°ÐºÐ¾Ð½Ð° Ð¾ Ð·Ð°Ñ‰Ð¸Ñ‚Ðµ Ð¿Ñ€Ð°Ð² Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð¸Ñ‚ÐµÐ»Ñ Ð Ð¤.`,

        `Ð’ Ñ‚ÐµÑ‡ÐµÐ½Ð¸Ðµ 14 Ð´Ð½ÐµÐ¹, Ð½Ðµ ÑÑ‡Ð¸Ñ‚Ð°Ñ Ð´Ð½Ñ Ð¿Ð¾ÐºÑƒÐ¿ÐºÐ¸. Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‚ Ð¢Ð¾Ð²Ð°Ñ€Ð° Ð½Ð°Ð´Ð»ÐµÐ¶Ð°Ñ‰ÐµÐ³Ð¾ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð° Ð²Ð¾Ð·Ð¼Ð¾Ð¶ÐµÐ½ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ð°Ð½Ð¸Ð¸ Ð¿Ð¸ÑÑŒÐ¼ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð·Ð°ÑÐ²Ð»ÐµÐ½Ð¸Ñ Ð² ÑÐ»ÑƒÑ‡Ð°Ðµ, ÐµÑÐ»Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ñ‹ ÐµÐ³Ð¾ Ñ‚Ð¾Ð²Ð°Ñ€Ð½Ñ‹Ð¹ Ð²Ð¸Ð´, Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ðµ ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð°, Ð° Ñ‚Ð°ÐºÐ¶Ðµ Ñ‚Ð¾Ð²Ð°Ñ€Ð½Ñ‹Ð¹ Ð¸/Ð¸Ð»Ð¸ ÐºÐ°ÑÑÐ¾Ð²Ñ‹Ð¹ Ñ‡ÐµÐº, Ð»Ð¸Ð±Ð¾ Ð¸Ð½Ð¾Ð¹ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´Ð°ÑŽÑ‰Ð¸Ð¹ Ñ„Ð°ÐºÑ‚ Ð¸ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ Ð¿Ð¾ÐºÑƒÐ¿ÐºÐ¸ ÑƒÐºÐ°Ð·Ð°Ð½Ð½Ð¾Ð³Ð¾ Ð¢Ð¾Ð²Ð°Ñ€Ð°.`
    ];

    // ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÐ¼ Ð²ÑÐµ Ñ‡Ð°ÑÑ‚Ð¸ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ
    for (const part of textParts) {
        await ctx.reply(part);
    }
    
    await ctx.reply('Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ:', backButton);
}

// Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¿Ð¾ÐºÐ°Ð·Ð° Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸ Ð¾ Ð½Ð°Ñ
async function showInfo(ctx, type) {
    let text = '';
    let photoFile = '';
    
    switch(type) {
        case 'about':
            text = `ÐŸÑ€Ð¾Ñ†ÐµÑÑ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´ÑÑ‚Ð²Ð° Ð°Ð²Ñ‚Ð¾Ñ‡ÐµÑ…Ð»Ð¾Ð²
Ð¡Ð¼ÐµÐ½Ð½Ñ‹Ðµ Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ðµ Ñ‡ÐµÑ…Ð»Ñ‹, Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ð¼Ñ‹Ðµ Ð½Ð°ÑˆÐµÐ¹ Ñ„Ð¸Ñ€Ð¼Ð¾Ð¹, Ñ€ÐµÑˆÐ°ÑŽÑ‚ ÑÑ€Ð°Ð·Ñƒ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð·Ð°Ð´Ð°Ñ‡:

Ð·Ð°Ñ‰Ð¸Ñ‰Ð°ÑŽÑ‚ Ñ€Ð¾Ð´Ð½ÑƒÑŽ Ð¾Ð±ÑˆÐ¸Ð²ÐºÑƒ ÐºÑ€ÐµÑÐµÐ» Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»Ñ;
Ð»ÑƒÑ‡ÑˆÐ°ÑŽÑ‚ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ð¸ ÐºÐ¾Ð¼Ñ„Ð¾Ñ€Ñ‚Ð½Ð¾ÑÑ‚ÑŒ ÐºÑ€ÐµÑÐµÐ»;
Ð¸Ð·Ð¼ÐµÐ½ÑÑŽÑ‚ ÑÑ‚Ð¸Ð»Ð¸ÑÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð¾Ð±Ñ€Ð°Ð· Ð²ÑÐµÐ³Ð¾ ÑÐ°Ð»Ð¾Ð½Ð°.
Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ Ð¼Ñ‹ Ð¼Ð¾Ð¶ÐµÐ¼ Ð¸Ð·Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾Ñ‡ÐµÑ…Ð¾Ð»Ñ‹ Ð¿Ñ€Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿Ð¾Ð´ Ð»ÑŽÐ±ÑƒÑŽ Ð¼Ð¾Ð´ÐµÐ»ÑŒ Ð»ÑŽÐ±Ð¾Ð¹ Ð¼Ð°Ñ€ÐºÐ¸ Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»Ñ. Ðš Ñ‚Ð¾Ð¼Ñƒ Ð¶Ðµ, ÑˆÐ¸Ñ€Ð¾ÐºÐ¸Ð¹ Ð°ÑÑÐ¾Ñ€Ñ‚Ð¸Ð¼ÐµÐ½Ñ‚Ð½Ñ‹Ð¹ Ñ€ÑÐ´ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ ÐºÐ°Ð¶Ð´Ð¾Ð¼Ñƒ Ð¶ÐµÐ»Ð°ÑŽÑ‰ÐµÐ¼Ñƒ ÐºÑƒÐ¿Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾Ñ‡ÐµÑ…Ð¾Ð» Ð¸Ð· ÐºÐ¾Ð¶Ð¸ Ð¶ÐµÐ»Ð°ÐµÐ¼Ð¾Ð³Ð¾ Ñ†Ð²ÐµÑ‚Ð° Ð¸ Ð¼Ð¾Ð´ÐµÐ»Ð¸. Ð­Ñ‚Ð¾ Ñ€Ð°Ð·Ð½Ð¾Ð¾Ð±Ñ€Ð°Ð·Ð¸Ðµ Ð¿Ð¾Ð´Ñ‡Ð¸Ð½ÐµÐ½Ð¾ Ð¾Ñ‚Ð»Ð°Ð¶ÐµÐ½Ð½Ð¾Ð¹ Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¸ Ð¿Ð¾ÑˆÐ¸Ð²Ð°: ÐºÐ°Ð¶Ð´Ð°Ñ Ð¼Ð¾Ð´ÐµÐ»ÑŒ Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¸Ñ‚ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ ÐºÐ»Ð°ÑÑÐ¸Ñ‡ÐµÑÐºÐ¸Ñ… ÑÑ‚Ð°Ð¿Ð¾Ð², Ð³Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ€ÑƒÑŽÑ‰Ð¸Ñ… ÐµÐ¹ Ð²Ñ‹ÑÐ¾ÐºÐ¾Ðµ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð¸Ñ‚Ð¾Ð³Ð¾Ð²Ð¾Ð³Ð¾ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð°.

Ð­Ñ‚Ð°Ð¿Ñ‹ Ð¿Ð¾ÑˆÐ¸Ð²Ð° Ð°Ð²Ñ‚Ð¾Ñ‡ÐµÑ…Ð»Ð° Ð¸Ð· ÐºÐ¾Ð¶Ð¸ Ð² Ð½Ð°ÑˆÐµÐ¹ Ñ„Ð¸Ñ€Ð¼Ðµ
Ð—Ð°ÐºÑƒÐ¿ÐºÐ° ÐºÐ¾Ð¶Ð¸.
ÐÐ°ÑˆÐ¸ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ñ‹ Ð¿Ð¾ Ð·Ð°ÐºÑƒÐ¿ÐºÐµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð² Ñ€Ð°Ð·Ñ‹ÑÐºÐ¸Ð²Ð°ÑŽÑ‚ Ð¿Ð¾ Ð²ÑÐµÐ¼Ñƒ Ð¼Ð¸Ñ€Ñƒ Ð¿Ð¾ÑÑ‚Ð°Ð²Ñ‰Ð¸ÐºÐ¾Ð² ÐºÐ¾Ð¶Ð¸, Ð³Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ€ÑƒÑŽÑ‰Ð¸Ñ… Ð¾Ð¿Ñ‚Ð¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ðµ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸Ñ‡ÐµÑÑ‚Ð²Ð°. ÐŸÑ€ÐµÐ¶Ð´Ðµ Ð²ÑÐµÐ³Ð¾, Ð±ÐµÑ€ÐµÑ‚ÑÑ Ð²Ð¾ Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ ÑÐ¾Ð¾Ñ‚Ð½Ð¾ÑˆÐµÐ½Ð¸Ðµ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð¾/Ñ†ÐµÐ½Ð° Ñ ÑƒÑ‡ÐµÑ‚Ð¾Ð¼ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸ Ð½Ð° ÑÐºÐ»Ð°Ð´ Ð¿Ñ€ÐµÐ´Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ñ; Ð¾Ð±ÑŠÐµÐ¼ Ð¸ Ð°ÑÑÐ¾Ñ€Ñ‚Ð¸Ð¼ÐµÐ½Ñ‚ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ð¼Ñ‹Ñ… ÐºÐ¾Ð¶.

Ð”Ð»Ñ Ð¿Ð¾ÑˆÐ¸Ð²Ð° Ð°Ð²Ñ‚Ð¾Ñ‡ÐµÑ…Ð»Ð¾Ð² Ðº ÐºÑ€ÐµÑÐ»Ð°Ð¼ Ð»ÑŽÐ±Ð¾Ð¹ Ð¼Ð°Ñ€ÐºÐ¸ Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»Ñ Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ Ñ‚Ñ€Ð¸ Ð²Ð¸Ð´Ð° ÐºÐ¾Ð¶Ð¸:

Ñ‚Ð¾Ð½ÐºÐ°Ñ Ñ Ð¿Ð¾Ð´ÐºÐ»Ð°Ð´ÐºÐ¾Ð¹ Ð¸Ð· Ð¿Ð¾Ñ€Ð¾Ð»Ð¾Ð½Ð°;
Ð½Ð° Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾Ð¹ Ð¿Ð¾Ð´ÐºÐ»Ð°Ð´ÐºÐµ;
Ð¿ÐµÑ€Ñ„Ð¾Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð°Ñ;
Ð˜Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ.
ÐÐ° ÑÑ‚Ð¾Ð¼ ÑÑ‚Ð°Ð¿Ðµ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÑÑ Ð²Ñ‹Ð±Ð¾Ñ€ ÑˆÐ°Ð±Ð»Ð¾Ð½Ð° Ð¿Ð¾Ð´ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ñ‹Ð¹ Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»ÑŒ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð° Ð¸Ð· Ñ€Ð°Ð½ÐµÐµ Ð½Ð°Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ð½Ð¾Ð¹ Ð±Ð°Ð·Ñ‹ Ð»ÐµÐºÐ°Ð» Ð¿Ð¾Ð´ ÐºÐ°Ð¶Ð´ÑƒÑŽ Ð¼Ð¾Ð´ÐµÐ»ÑŒ ÐºÐ°Ð¶Ð´Ð¾Ð¹ Ð¼Ð°Ñ€ÐºÐ¸ Ð°Ð²Ñ‚Ð¾.

Ð Ð°ÑÐºÑ€Ð¾Ð¹.
ÐžÑ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ ÑÑ‚Ð°Ð¿, Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÐ¼Ñ‹Ð¹ Ð¾Ð¿Ñ‹Ñ‚Ð½Ñ‹Ð¼ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»Ð¸ÑÑ‚Ð¾Ð¼ Ð½Ð°ÑˆÐµÐ¹ Ñ„Ð¸Ñ€Ð¼Ñ‹, Ð·Ð½Ð°ÑŽÑ‰Ð¸Ð¼ Ñ‚Ð¾Ð½ÐºÐ¾ÑÑ‚Ð¸ Ð¿Ð¾ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ³Ð¾ Ð¿Ð¾ÑˆÐ¸Ð²Ð° Ð¸ Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸ Ð¿Ñ€Ð¾Ð¿Ð¾Ñ€Ñ†Ð¸Ð¹ Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ñ… ÐºÑ€ÐµÑÐµÐ» Ð¿Ñ€Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð²ÑÐµÑ… Ð¼Ð°Ñ€Ð¾Ðº Ð¼Ð°ÑˆÐ¸Ð½. Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸Ð¾Ð½Ð°Ð» Ñ Ð¼Ð½Ð¾Ð³Ð¾Ð»ÐµÑ‚Ð½ÐµÐ¹ Ð¿Ñ€Ð°ÐºÑ‚Ð¸ÐºÐ¾Ð¹ ÑÐ¼Ð¾Ð¶ÐµÑ‚ Ð³Ñ€Ð°Ð¼Ð¾Ñ‚Ð½Ð¾ Ñ€Ð°ÑÐºÑ€Ð¾Ð¸Ñ‚ÑŒ ÐºÐ¾Ð¶Ñƒ, Ð²ÐµÐ´ÑŒ Ð¼Ð°ÑˆÐ¸Ð½, ÐºÑ€ÐµÑÐµÐ», Ñ„Ð°ÑÐ¾Ð½Ð¾Ð² Ñ‡ÐµÑ…Ð»Ð¾Ð² Ð¼Ð½Ð¾Ð³Ð¾ Ð¸ Ð¿Ð¾Ð´ ÐºÐ°Ð¶Ð´ÑƒÑŽ Ð¼Ð¾Ð´ÐµÐ»ÑŒ Ð½ÑƒÐ¶Ð½Ð° ÑÐ²Ð¾Ñ Ð¸Ð½Ð´Ð¸Ð²Ð¸Ð´ÑƒÐ°Ð»ÑŒÐ½Ð°Ñ Ð²Ñ‹ÐºÑ€Ð¾Ð¹ÐºÐ°.

ÐžÐ±ÑˆÐ¸Ð² ÐºÑ€Ð°Ñ.
Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ ÑÑ‚Ð°Ð¿, Ð±ÐµÐ· ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð³Ð¾ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ðµ Ð¸Ð·Ð´ÐµÐ»Ð¸Ðµ Ð¸Ð· ÐºÐ¾Ð¶Ð¸ Ð½Ðµ Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾. ÐšÐ¾Ð¶Ð° Ð¾Ð±Ð»Ð°Ð´Ð°ÐµÑ‚ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð½Ð¾Ð¹ ÑÑ‚ÐµÐ¿ÐµÐ½ÑŒÑŽ ÑÐ»Ð°ÑÑ‚Ð¸Ñ‡Ð½Ð¾ÑÑ‚Ð¸ Ð¸, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð³Ð¾Ñ‚Ð¾Ð²Ð¾Ðµ Ð¸Ð·Ð´ÐµÐ»Ð¸Ðµ Ð±ÐµÑÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒÐ½Ð¾ Ð½Ðµ Ñ€Ð°ÑÑ‚ÑÐ³Ð¸Ð²Ð°Ð»Ð¾ÑÑŒ Ð¿Ð¾ ÐºÑ€Ð°ÑŽ, ÑÑ€ÐµÐ·Ñ‹ Ð²ÑÐµÑ… Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹ Ð¿Ð¾Ð´Ð²ÐµÑ€Ð³Ð°ÑŽÑ‚ Ð¾Ð±ÑˆÐ¸Ð²ÐºÐµ.

ÐŸÐ¾ÑˆÐ¸Ð².
ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ ÑÑ‚Ð°Ð¿Ñ‹ Ð¿Ñ€Ð¾Ð¹Ð´ÐµÐ½Ñ‹ Ð¸ Ð¾ÑÑ‚Ð°Ð»ÑÑ Ñ„Ð¸Ð½Ð¸ÑˆÐ½Ñ‹Ð¹ Ð¿Ð¾ÑˆÐ¸Ð²: Ð¸Ð· Ð½Ð°Ð±Ð¾Ñ€Ð° Ñ€Ð°Ð·Ð½Ñ‹Ñ…, Ñ€Ð°Ð½ÐµÐµ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ð½Ñ‹Ñ… Ð»Ð¾ÑÐºÑƒÑ‚Ð¾Ð² (Ñ€Ð°Ð·Ð½Ñ‹Ñ… ÑÐ¾Ñ€Ñ‚Ð¾Ð² ÐºÐ¾Ð¶Ð¸) Ð¾Ð¿Ñ‹Ñ‚Ð½Ñ‹Ðµ ÑˆÐ²ÐµÐ¸ ÑÐ¾Ð±Ð¸Ñ€Ð°ÑŽÑ‚, ÐºÐ°Ðº Ð¸Ð· ÐºÐ¾Ð½ÑÑ‚Ñ€ÑƒÐºÑ‚Ð¾Ñ€Ð°, Ð³Ð¾Ñ‚Ð¾Ð²Ð¾Ðµ Ð¾Ð±ÑŠÐµÐ¼Ð½Ð¾Ðµ Ð¸Ð·Ð´ÐµÐ»Ð¸Ðµ â€“ Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ñ‡ÐµÑ…Ð¾Ð». ÐÐ° ÑÑ‚Ð¾Ð¼ ÑÑ‚Ð°Ð¿Ðµ Ð²Ð°Ð¶Ð½Ð¾ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð² Ð¿Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ Ñ ÐºÐ¾Ð¶ÐµÐ¹ Ð¸ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ðµ Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ ÑˆÐ²ÐµÐ¹Ð½Ð¾Ð³Ð¾ Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ñ. ÐšÐ¾Ð¶Ð° â€“ Ð´Ð¾Ñ€Ð¾Ð³Ð¾Ð¹ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð», Ð½Ðµ Ð´Ð¾Ð¿ÑƒÑÐºÐ°ÑŽÑ‰Ð¸Ð¹ Ð¾ÑˆÐ¸Ð±Ð¾Ðº Ð¿Ñ€Ð¸ Ð¿Ð¾ÑˆÐ¸Ð²Ðµ. ÐÐ° Ð½Ð°ÑˆÐµÐ¼ Ð¿Ñ€ÐµÐ´Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ð¸ Ð²ÑÐµ ÑˆÐ²Ñ‹ Ð¸ ÑÑ‚Ñ€Ð¾Ñ‡ÐºÐ¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑŽÑ‚ÑÑ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²ÐµÐ½Ð½Ð¾, Ð½Ð°Ð´ÐµÐ¶Ð½Ð¾ Ð¸ Ñ Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ñ€Ð°Ð·Ð°.

Ð”Ð¾ÑÑ‚Ð°Ð²ÐºÐ°.
Ð“Ð¾Ñ‚Ð¾Ð²Ð¾Ðµ Ð¸Ð·Ð´ÐµÐ»Ð¸Ðµ Ñ‚Ñ€Ð°Ð½ÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ÑÑ Ð½ÐµÐ¿Ð¾ÑÑ€ÐµÐ´ÑÑ‚Ð²ÐµÐ½Ð½Ð¾ Ð·Ð°ÐºÐ°Ð·Ñ‡Ð¸ÐºÑƒ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ñ‹Ð¼ Ð¸Ð¼ ÑÐ¿Ð¾ÑÐ¾Ð±Ð¾Ð¼. ÐŸÐ¾ÑÐ»Ðµ Ñ‡ÐµÐ³Ð¾, ÐºÐ»Ð¸ÐµÐ½Ñ‚ ÑÐ°Ð¼ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿Ñ€Ð¾Ð¸Ð·Ð²ÐµÑÑ‚Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÑƒ Ð°Ð²Ñ‚Ð¾Ñ‡ÐµÑ…Ð»Ð¾Ð², Ð»Ð¸Ð±Ð¾ Ð²Ð¾ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒÑÑ ÑƒÑÐ»ÑƒÐ³Ð°Ð¼Ð¸ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»Ð¸ÑÑ‚Ð¾Ð². Ð˜Ð¼ÐµÐ½Ð½Ð¾ ÑÑ‚Ð¾Ñ‚ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚ â€“ Ñ‚ÐµÑÑ‚ Ð½Ð° ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð²ÑÐµÑ… ÑÑ‚Ð°Ð¿Ð¾Ð² Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´ÑÑ‚Ð²Ð° Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ñ‡ÐµÑ…Ð»Ð°: Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð½Ñ‹Ð¹ Ð½Ð°Ð¼Ð¸ Ñ‡ÐµÑ…Ð¾Ð» Ð¸Ð´ÐµÐ°Ð»ÑŒÐ½Ð¾ Â«ÑÐ°Ð´Ð¸Ñ‚ÑÑÂ» Ð½Ð° ÐºÑ€ÐµÑÐ»Ð¾.

ÐŸÑÑ‚ÑŒ ÑÑ‚Ð°Ð¿Ð¾Ð² â€“ Ð¿ÑÑ‚ÑŒ ÑÐ¾ÑÑ‚Ð°Ð²Ð»ÑÑŽÑ‰Ð¸Ñ… ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð° Ð³Ð¾Ñ‚Ð¾Ð²Ð¾Ð³Ð¾ Ð°Ð²Ñ‚Ð¾Ñ‡ÐµÑ…Ð»Ð°: Ð½Ð°ÑˆÐ° Ñ„Ð¸Ñ€Ð¼Ð° Ð¸Ð¼ÐµÐµÑ‚ Ð²ÑÐµ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾Ðµ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´ÑÑ‚Ð²Ð° Ð¸Ð´ÐµÐ°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð°Ð²Ñ‚Ð¾Ñ‡ÐµÑ…Ð»Ð° Ð½Ð° Ð²Ð°ÑˆÐµ Ð°Ð²Ñ‚Ð¾.`;
            photoFile = infoPhotos.about;
            break;
    }
    
    const photoPath = path.join(IMAGES_FOLDER, photoFile);
    
    if (fs.existsSync(photoPath)) {
        try {
            await ctx.replyWithPhoto({ source: photoPath }, { caption: text });
        } catch (e) {
            console.error('Error sending photo:', e);
            await ctx.reply(text);
        }
    } else {
        await ctx.reply(text);
    }
    
    ctx.reply('Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ:', backButton);
}

// ÐÐ°Ñ‡Ð°Ð»Ð¾ ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸Ð¸
function startConsultation(ctx) {
    userStates[ctx.from.id] = { step: 'consultation_name' };
    ctx.reply('ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°ÑˆÐµ Ð¤Ð˜Ðž:', Markup.removeKeyboard());
}

// ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ñ‹Ñ… ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ Ð´Ð»Ñ ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸Ð¸
bot.on('text', (ctx) => {
    const userId = ctx.from.id;
    const state = userStates[userId];

    if (ctx.message.text === 'â¬…ï¸ ÐÐ°Ð·Ð°Ð´') {
        delete userStates[userId];
        return ctx.reply('Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ:', mainMenu);
    }

    if (!state) {
        return ctx.reply('ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ð¸Ð· Ð¼ÐµÐ½ÑŽ:', mainMenu);
    }

    if (state.step === 'consultation_name') {
        state.name = ctx.message.text;
        state.step = 'consultation_phone';
        ctx.reply('Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°:');
    } else if (state.step === 'consultation_phone') {
        state.phone = ctx.message.text;
        state.step = 'consultation_question';
        ctx.reply('ÐžÐ¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ð²Ð°Ñˆ Ð²Ð¾Ð¿Ñ€Ð¾Ñ:');
    } else if (state.step === 'consultation_question') {
        state.question = ctx.message.text;

        // ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÐ¼ Ð·Ð°ÑÐ²ÐºÑƒ Ð² Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ
        const message = `ðŸ“Œ ÐÐ¾Ð²Ð°Ñ Ð·Ð°ÑÐ²ÐºÐ° Ð½Ð° ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸ÑŽ:\n\nðŸ‘¤ Ð¤Ð˜Ðž: ${state.name}\nðŸ“± Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½: ${state.phone}\nâ“ Ð’Ð¾Ð¿Ñ€Ð¾Ñ: ${state.question}\nÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ: @${ctx.from.username || ctx.from.first_name}`;
        bot.telegram.sendMessage(GROUP_ID, message);

        ctx.reply('Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾! Ð’Ð°ÑˆÐ° Ð·Ð°ÑÐ²ÐºÐ° Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð°. ÐœÑ‹ ÑÐ²ÑÐ¶ÐµÐ¼ÑÑ Ñ Ð²Ð°Ð¼Ð¸ Ð² Ð±Ð»Ð¸Ð¶Ð°Ð¹ÑˆÐµÐµ Ð²Ñ€ÐµÐ¼Ñ.', mainMenu);
        delete userStates[userId];
    } else if (state.step === 'order_phone') {
        const phone = ctx.message.text;
        const productId = state.productId;
        const category = state.currentCategory === 'seatCovers' ? 'ÐÐ²Ñ‚Ð¾Ñ‡ÐµÑ…Ð»Ñ‹' : 'ÐÐ²Ñ‚Ð¾ÐºÐ¾Ð²Ñ€Ñ‹';
        const products = state.currentCategory === 'seatCovers' ? seatCovers : carMats;
        const product = products.find(p => p.id == productId);

        if (product) {
            const message = `ðŸ›’ ÐÐ¾Ð²Ñ‹Ð¹ Ð·Ð°ÐºÐ°Ð·:\n\nÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ: ${category}\nÐ¢Ð¾Ð²Ð°Ñ€: ${product.name}\nÐ¢ÐµÐ»ÐµÑ„Ð¾Ð½: ${phone}\nÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ: @${ctx.from.username || ctx.from.first_name}`;
            bot.telegram.sendMessage(GROUP_ID, message);
            ctx.reply('Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾! Ð’Ð°Ñˆ Ð·Ð°ÐºÐ°Ð· Ð¿Ñ€Ð¸Ð½ÑÑ‚. ÐœÑ‹ ÑÐºÐ¾Ñ€Ð¾ Ñ Ð²Ð°Ð¼Ð¸ ÑÐ²ÑÐ¶ÐµÐ¼ÑÑ.', mainMenu);
        } else {
            ctx.reply('ÐŸÑ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ Ð·Ð°ÐºÐ°Ð·Ð°. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ ÐµÑ‰Ðµ Ñ€Ð°Ð·.', mainMenu);
        }

        delete userStates[userId];
    }
});

// ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐÐ°Ð·Ð°Ð´"
bot.hears('â¬…ï¸ ÐÐ°Ð·Ð°Ð´', async (ctx) => {
    console.log('Back button triggered by user:', ctx.from.id);
    try {
        const userId = ctx.from.id;
        if (userStates[userId]) {
            console.log('User state before reset:', userStates[userId]);
            delete userStates[userId];
        }
        await ctx.reply('Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ:', mainMenu);
    } catch (error) {
        console.error('Error in back button handler:', error);
        await ctx.reply('ÐŸÑ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ°. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ ÐµÑ‰Ñ‘ Ñ€Ð°Ð·.', mainMenu);
    }
});

// ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° inline ÐºÐ½Ð¾Ð¿Ð¾Ðº Ð·Ð°ÐºÐ°Ð·Ð°
bot.action(/order_(\d+)/, (ctx) => {
    const productId = ctx.match[1];
    const userId = ctx.from.id;
    const state = userStates[userId] || {};
    
    if (state.currentCategory) {
        userStates[userId] = {
            ...state,
            step: 'order_phone',
            productId: productId
        };
        ctx.reply('ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð° Ð´Ð»Ñ Ð¾Ñ„Ð¾Ñ€Ð¼Ð»ÐµÐ½Ð¸Ñ Ð·Ð°ÐºÐ°Ð·Ð°:', Markup.removeKeyboard());
    } else {
        ctx.answerCbQuery('ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ ÑÐ½Ð°Ñ‡Ð°Ð»Ð° Ñ‡ÐµÑ€ÐµÐ· Ð¼ÐµÐ½ÑŽ');
    }
});

// Ð—Ð°Ð¿ÑƒÑÐº Ð±Ð¾Ñ‚Ð°
bot.launch()
    .then(() => console.log('Ð‘Ð¾Ñ‚ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½'))
    .catch(err => console.error('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð¿ÑƒÑÐºÐ° Ð±Ð¾Ñ‚Ð°:', err));

// ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¾ÑˆÐ¸Ð±Ð¾Ðº
process.once('SIGINT', () => bot.stop('SIGINT'));
process.once('SIGTERM', () => bot.stop('SIGTERM'));